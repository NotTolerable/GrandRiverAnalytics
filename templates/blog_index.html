{% extends "base.html" %}
{% block head_extra %}
{% if prev_url %}<link rel="prev" href="{{ base_url }}{{ prev_url }}" />{% endif %}
{% if next_url %}<link rel="next" href="{{ base_url }}{{ next_url }}" />{% endif %}
{% if breadcrumbs %}<script type="application/ld+json">{{ breadcrumbs|tojson }}</script>{% endif %}
{% if website_json %}<script type="application/ld+json">{{ website_json|tojson }}</script>{% endif %}
{% endblock %}
{% block content %}
<section class="page-hero">
    <div class="container narrow center">
        <h1>Reports</h1>
        <p>Stock write-ups and sector notes from the Grand River Analytics team.</p>
    </div>
</section>
<section class="section" id="reports">
    <div class="container blog-collection">
        <div class="blog-grid">
            {% set placeholder_cover = url_for('static', filename='img/blog-placeholder.svg') %}
            {% for post in posts %}
            {% set cover = post.cover_url or placeholder_cover %}
            {% set theme = post.hero_style or 'light' %}
            <article class="post-card post-card--{{ theme }} {% if post.featured %}post-card--featured{% endif %}" data-post data-title="{{ post.title }} {{ post.excerpt }}" data-tags="{{ post.tags }}">
                <div class="post-card-media" data-fallback-container data-placeholder-label="Cover image for {{ post.title }}">
                    <span class="media-fallback" aria-hidden="true">{{ post.title[0] }}</span>
                    <img
                        src="{{ cover }}"
                        alt="Cover image for {{ post.title }}"
                        loading="lazy"
                        data-fallback-image
                        data-default-cover="{{ placeholder_cover }}"
                    />
                </div>
                <div class="post-card-content">
                    {% if post.hero_kicker %}<p class="kicker">{{ post.hero_kicker }}</p>{% endif %}
                    <p class="muted">{{ post.publish_date|format_date }}</p>
                    <h2><a href="{{ url_for('post_detail', slug=post.slug) }}">{{ post.title }}</a></h2>
                    <p class="muted tags">
                        {% for tag in post.tags|tag_list %}
                        <span class="tag">{{ tag }}</span>{% if not loop.last %} {% endif %}
                        {% endfor %}
                    </p>
                    <p>{{ post.excerpt }}</p>
                    {% if post.featured %}<span class="status status-featured">Featured</span>{% endif %}
                    <a class="read-link" href="{{ url_for('post_detail', slug=post.slug) }}">Read Report â†’</a>
                </div>
            </article>
            {% else %}
            <p>No posts yet. Check back soon.</p>
            {% endfor %}
        </div>
        <nav class="pagination" aria-label="Pagination">
            {% if prev_url %}<a href="{{ prev_url }}" rel="prev">Previous</a>{% endif %}
            <span>Page {{ page }} of {{ total_pages }}</span>
            {% if next_url %}<a href="{{ next_url }}" rel="next">Next</a>{% endif %}
        </nav>
    </div>
</section>
{% endblock %}
