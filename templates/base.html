<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}{{ meta.title if meta else settings.site_name }}{% endblock %}</title>
    {% if meta %}
    <meta name="description" content="{{ meta.description }}" />
    <link rel="canonical" href="{{ meta.canonical }}" />
    <meta property="og:title" content="{{ meta.title }}" />
    <meta property="og:description" content="{{ meta.description }}" />
    <meta property="og:type" content="{{ meta.og_type }}" />
    <meta property="og:url" content="{{ meta.canonical }}" />
    {% if meta.image_url %}
    <meta property="og:image" content="{{ meta.image_url }}" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="{{ meta.image_url }}" />
    {% else %}
    <meta name="twitter:card" content="summary" />
    {% endif %}
    {% endif %}
    <meta name="theme-color" content="#ffffff" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block head_extra %}{% endblock %}
</head>
<body>
    <a class="skip-link" href="#main">Skip to content</a>
    <header class="site-header">
        <div class="container header-inner">
            <a class="logo" href="{{ url_for('home') }}" aria-label="{{ settings.site_name }} home">
                <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="{{ settings.site_name }} logo" width="56" height="40" />
            </a>
            <nav aria-label="Primary navigation">
                <ul class="nav-list">
                    <li><a href="{{ url_for('home') }}" {% if request.endpoint == 'home' %}aria-current="page"{% endif %}>Home</a></li>
                    <li><a href="{{ url_for('home') }}#about">About Us</a></li>
                    <li><a href="{{ url_for('blog_index') }}" {% if request.endpoint in ['blog_index', 'post_detail'] %}aria-current="page"{% endif %}>Reports</a></li>
                    <li><a href="{{ url_for('team') }}" {% if request.endpoint == 'team' %}aria-current="page"{% endif %}>Team</a></li>
                    <li><a href="{{ url_for('contact') }}" {% if request.endpoint == 'contact' %}aria-current="page"{% endif %}>Contact Us</a></li>
                    {% if session.get('admin_authenticated') %}
                    <li><a href="{{ url_for('admin_dashboard') }}">Admin</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="flash-container" role="status">
        {% for category, message in messages %}
        <div class="flash flash-{{ category }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    <main id="main" class="site-main">
        {% block content %}{% endblock %}
    </main>
    <footer class="site-footer">
        <div class="container footer-grid">
            <div>
                <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="{{ settings.site_name }} logo" width="72" height="48" />
                <p class="muted">Independent equity research crafted by students at the University of Waterloo and Wilfrid Laurier University.</p>
            </div>
            <div>
                <h3>Contact</h3>
                <p>
                    416-846-2766<br />
                    <a href="mailto:uwlaurier@gmail.com">uwlaurier@gmail.com</a><br />
                    200 University Ave W, Waterloo, ON N2L 3G1<br />
                    75 University Ave W, Waterloo, ON N2L 3C5
                </p>
            </div>
            <div>
                <h3>Explore</h3>
                <ul class="footer-nav">
                    <li><a href="{{ url_for('home') }}">Home</a></li>
                    <li><a href="{{ url_for('home') }}#about">About Us</a></li>
                    <li><a href="{{ url_for('blog_index') }}">Reports</a></li>
                    <li><a href="{{ url_for('team') }}">Team</a></li>
                    <li><a href="{{ url_for('contact') }}">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <div class="container footer-bottom">
            <p>© {{ current_year }} Grand River Analytics · Research commentary only. Not investment advice.</p>
        </div>
    </footer>
</body>
</html>
